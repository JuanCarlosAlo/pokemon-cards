(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();let g=30,p=[],c=[],n;const h=()=>{if(c.length>=g/2)return;const e=Math.floor(Math.random()*151);return!c.includes(e)&&!c.includes(0)&&c.push(e),p=[...c,...c],h()},v=e=>{n=[...e];for(let r=n.length-1,a;r;r--)a=Math.floor(Math.random()*r),[n[r],n[a]]=[n[a],n[r]];return n},M=e=>{const r=document.createElement("img");return r.classList.add("card__image"),r.src=`assets/images/${n[e]}.png`,r},O=()=>{const e=document.createElement("div");return e.classList.add("card__back"),e},_=()=>{const e=document.createElement("div");return e.classList.add("card__front"),e},b=e=>{const r=document.createDocumentFragment();p.forEach((a,i)=>{const t=document.createElement("div");t.classList.add("card"),t.dataset.card=`card-${n[i]}`,console.log(t.dataset.card,t);const o=_(),u=M(i);o.append(u),t.append(o,O()),r.append(t)}),e.append(r)},E=document.querySelectorAll(".card"),w=document.getElementById("player-score"),I=document.getElementById("player-combo"),C=document.getElementById("retry");let s,l,f=0,L=!0,d=0,m=0;const B=e=>{E.forEach(a=>{a.classList.add("card--show")});const r=setTimeout(()=>{E.forEach(a=>{a.classList.remove("card--show"),clearTimeout(r)})},2e3)},x=()=>{s.dataset.card===l.dataset.card?(f++,d++,m+=2):(d=0,s.classList.remove("card--show"),l.classList.remove("card--show")),w.textContent=f*d,I.textContent="x"+(Number(d)+1),l=void 0,s=void 0,L=!0,console.log(m,g),m===g&&(A(),m=0)},A=()=>{C.style.display="flex"},F=()=>{C.style.display="none",d=0,f=0,w.textContent=f,I.textContent=d},N=e=>{s?(L=!1,l=e,l.classList.add("card--show"),e.addEventListener("transitionend",()=>{s&&l&&x()},{once:!0})):(s=e,s.classList.add("card--show"))},y=document.getElementById("card");B();h();v(p);b(y);y.addEventListener("click",e=>{!e.target.classList.contains("card")||L===!1||(console.log(e.target),N(e.target))});C.addEventListener("click",()=>{y.innerHTML="",B(),h(),v(p),b(y),F()});
